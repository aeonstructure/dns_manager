#{set 'moreScripts'}
	#{get 'moreScripts' /}
	#{script 'models/cname_record.js' /}
#{/set}

<form data-bind="submit: addCNAME_Record">
	<input data-bind="value: new_cname_record_hostname" placeholder="hostname" />
	<input data-bind="value: new_cname_record_target" placeholder="host.${domain.name}." />
	<input data-bind="value: domain_id" value="${domain.id}" type="hidden" />
    <button type="submit">Add</button>
</form>

<ul data-bind="foreach: cname_records">
    <li>
        <input data-bind="value: hostname, valueUpdate: 'afterkeydown', event: { blur: $parent.saveCNAME_Record }" />
		<input data-bind="value: target, valueUpdate: 'afterkeydown', event: { blur: $parent.saveCNAME_Record }" />
        <a href="#" data-bind="click: $parent.removeCNAME_Record">Delete</a>
    </li> 
</ul>


<script type="text/javascript">

var domain_id = '${domain.id}';

ko.applyBindings(new CNAME_RecordViewModel(), document.getElementById("cname_records"));

</script>